–í D3.js, —á—Ç–æ–±—ã **–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –≤—ã–±–æ—Ä–∫—É —ç–ª–µ–º–µ–Ω—Ç–æ–≤** –∏ **–≤—ã–≤–µ—Å—Ç–∏ –∑–∞–¥–∞–Ω–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –≤ –∫–æ–Ω—Å–æ–ª—å**, —Ç—ã –º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Ü–µ–ø–æ—á–∫—É –º–µ—Ç–æ–¥–æ–≤ `d3.selectAll(...)`, –∑–∞—Ç–µ–º ‚Äî `.each(...)` –¥–ª—è –æ–±—Ö–æ–¥–∞ –≤—Å–µ—Ö —É–∑–ª–æ–≤.

–ü—Ä–∏–º–µ—Ä:

---

### ‚úÖ –ü—Ä–∏–º–µ—Ä: –ª–æ–≥–∏—Ä—É–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã –≤—Å–µ—Ö `<circle>`

```js
d3.selectAll("circle")
  .each(function(d, i) {
    const el = d3.select(this);
    const cx = el.attr("cx");
    const cy = el.attr("cy");
    const r  = el.attr("r");

    console.log(`circle[${i}]: cx=${cx}, cy=${cy}, r=${r}`);
  });
```

---

### üîç –†–∞–∑–±–æ—Ä:

* `d3.selectAll("circle")` ‚Äî –≤—ã–±–∏—Ä–∞–µ—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã `<circle>`.
* `.each(function(d, i) { ... })` ‚Äî –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –∏—Ö:

  * `this` ‚Äî DOM-—ç–ª–µ–º–µ–Ω—Ç.
  * `d` ‚Äî –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–µ—Å–ª–∏ –µ—Å—Ç—å).
  * `i` ‚Äî —ç—Ç–æ –∏–Ω–¥–µ–∫—Å —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ —Ç–µ–∫—É—â–µ–π –≤—ã–±–æ—Ä–∫–µ, –∫ –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –º–µ—Ç–æ–¥ .each(). –ù–æ–º–µ—Ä –ø–æ –ø–æ—Ä—è–¥–∫—É –≤ –º–∞—Å—Å–∏–≤–µ DOM-—ç–ª–µ–º–µ–Ω—Ç–æ–≤, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö D3 (–∞ –Ω–µ –∑–Ω–∞—á–µ–Ω–∏–µ –µ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞ id –∏ –Ω–µ –∏–Ω–¥–µ–∫—Å –≤ –º–∞—Å—Å–∏–≤–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞–ø—Ä—è–º—É—é!).
`i` –æ—Ç–Ω–æ—Å–∏—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –∫ —Ç–æ–π –≤—ã–±–æ—Ä–∫–µ, –≥–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è. –û–Ω –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞.
–ï—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å, –µ–≥–æ –Ω—É–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.
* `d3.select(this).attr("cx")` ‚Äî –ø–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞.

---

### üõ† –ú–æ–∂–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏ –¥—Ä—É–≥–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã/—Å–≤–æ–π—Å—Ç–≤–∞:

```js
const logAttrs = ["cx", "cy", "r", "fill", "id"];

d3.selectAll("circle")
  .each(function(d, i) {
    const el = d3.select(this);
    const values = logAttrs.map(attr => `${attr}=${el.attr(attr)}`);
    console.log(`circle[${i}]: ${values.join(", ")}`);
  });
```

---

### üìå –ï—Å–ª–∏ –Ω—É–∂–Ω—ã *—Å—Ç–∏–ª–∏* –≤–º–µ—Å—Ç–æ –∞—Ç—Ä–∏–±—É—Ç–æ–≤:

```js
const fill = d3.select(this).style("fill");
```

---

### üìå –ï—Å–ª–∏ —Ç—ã –ø—Ä–∏–≤—è–∑—ã–≤–∞–ª –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `.data(...)`, —Ç–æ –º–æ–∂–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏ –∏—Ö:

```js
d3.selectAll("circle")
  .each(function(d, i) {
    console.log(`circle[${i}]: bound data =`, d);
  });
```

---


* `this` ‚Äî —ç—Ç–æ **DOM-—ç–ª–µ–º–µ–Ω—Ç** (`SVGCircleElement`),
* —É DOM-—ç–ª–µ–º–µ–Ω—Ç–æ–≤ **–Ω–µ—Ç –º–µ—Ç–æ–¥–∞ `attr(...)`**.


## ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±

–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏ ‚Äî —á–µ—Ä–µ–∑ `d` –∏ —á–µ—Ä–µ–∑ `__data__`:

```js
d3.selectAll("circle")
  .each(function(d, i) {
    console.log("d:", d, "this.__data__:", this.__data__);
  });
```

### üìå –ß—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ:

–û–±–∞ —Å–ø–æ—Å–æ–±–∞ (`d` –∏ `this.__data__`) –¥–∞—é—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ:

* `d` ‚Äî —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ D3 –≤ `each(...)` (–∏ –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã).
* `this.__data__` ‚Äî —ç—Ç–æ –ø–æ–ª–µ, –≤ –∫–æ—Ç–æ—Ä–æ–µ D3 **—Ñ–∏–∑–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**.

–≠—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

---

## üí° –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å D3-–æ–±—ë—Ä—Ç–∫—É (`Selection`), –ø–∏—à–∏:

```js
d3.selectAll("circle")
  .each(function(d, i) {
    const el = d3.select(this);
    console.log("d:", d, "attr(cx):", el.attr("cx"));
  });
```

---

## üß† –ò—Ç–æ–≥–æ:

| –í—ã—Ä–∞–∂–µ–Ω–∏–µ                   | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                                  |
| --------------------------- | ------------------------------------------- |
| `d`                         | –ü—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∏–∑ `.data(...)`)        |
| `this.__data__`             | –¢–æ –∂–µ —Å–∞–º–æ–µ: –¥–∞–Ω–Ω—ã–µ, —Ö—Ä–∞–Ω—è—â–∏–µ—Å—è –≤ DOM       |
| `this.attr(...)`            | ‚ùå –û—à–∏–±–∫–∞ ‚Äî –Ω–µ—Ç —Ç–∞–∫–æ–≥–æ –º–µ—Ç–æ–¥–∞ —É DOM-—ç–ª–µ–º–µ–Ω—Ç–∞ |
| `d3.select(this).attr(...)` | ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–æ—Å—Ç—É–ø–∞ –∫ –∞—Ç—Ä–∏–±—É—Ç–∞–º     |



