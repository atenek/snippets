## üîó –ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ —ç–ª–µ–º–µ–Ω—Ç—É –¥–∞–Ω–Ω—ã–µ (`datum`) –≤ D3.js?

–ü—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞ `.data(dataArray)` –≤ D3.js, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Ç–µ–∫—É—â–µ–π –≤—ã–±–æ—Ä–∫–∏ (DOM-—ç–ª–µ–º–µ–Ω—Ç—ã –≤ selection) —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ dataArray.
–ü—Ä–∏ —ç—Ç–æ–º —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ç—Ä–∏ –ø–æ–¥–≤—ã–±–æ—Ä–∫–∏:
  - update ‚Äî –¥–ª—è DOM-—ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —ç–ª–µ–º–µ–Ω—Ç –¥–∞–Ω–Ω—ã—Ö.
  - enter ‚Äî –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–º –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç DOM-—ç–ª–µ–º–µ–Ω—Ç–æ–≤.
  - exit ‚Äî –¥–ª—è DOM-—ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–º –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã—Ö.

–ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –¥–∞–∂–µ –µ—Å–ª–∏ DOM-—ç–ª–µ–º–µ–Ω—Ç–æ–≤ –µ—â—ë –Ω–µ—Ç, d3.selectAll('circle').data(data) ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç.  
–≠—Ç–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞—ë—Ç —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –∏ –¥–∞–ª–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å DOM-—ç–ª–µ–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ .enter()..

###üîç –ü—Ä–∏–º–µ—Ä (–±–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö DOM-—ç–ª–µ–º–µ–Ω—Ç–æ–≤)
```js
const data = [10, 20, 30];

d3.select('svg')
  .selectAll('circle')     // –≤ DOM –ø–æ–∫–∞ –Ω–µ—Ç <circle>
  .data(data)              // —Å–≤—è–∑—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ
  .enter()                 // —Å–æ–∑–¥–∞—ë–º enter-—Å–µ–ª–µ–∫—Ü–∏—é
  .append('circle')        // —Å–æ–∑–¥–∞—ë–º <circle> –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö
  .attr('r', d => d);      // –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```
–ó–¥–µ—Å—å DOM-—ç–ª–µ–º–µ–Ω—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –ø–æ–∑–∂–µ, –Ω–æ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å—Ä–∞–∑—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö.—å –∫–∞–∂–¥—ã–π `<circle>` –±—É–¥–µ—Ç —Å–≤—è–∑–∞–Ω —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º –º–∞—Å—Å–∏–≤–∞: `10`, `20`, `30`.

---

## üìå –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ?

üî∏ –ü—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ **—Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–µ –≤ `Selection`**, –∞ **–≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ DOM-—ç–ª–µ–º–µ–Ω—Ç–∞** ‚Äî —á–µ—Ä–µ–∑ —Å–∫—Ä—ã—Ç–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ `__data__`:

```js
d3.select("circle").node().__data__  // ‚Üí –≤–µ—Ä–Ω—ë—Ç –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

* –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ "–∂–∏–≤—É—Ç" –≤–º–µ—Å—Ç–µ —Å DOM-—ç–ª–µ–º–µ–Ω—Ç–æ–º, –∞ –Ω–µ —Å –æ–±—ä–µ–∫—Ç–æ–º `d3.selection`.

---

## üß™ –ö–∞–∫ –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è?

–ö–æ–≥–¥–∞ —Ç—ã –ø–∏—à–µ—à—å:

```js
selection.on("click", function(event, d) {
  console.log(d);       // ‚Üê —ç—Ç–æ —Ç–æ—Ç —Å–∞–º—ã–π __data__, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π –∫ —ç–ª–µ–º–µ–Ω—Ç—É
  console.log(this);    // ‚Üê DOM-—ç–ª–µ–º–µ–Ω—Ç
});
```

D3 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç `d = this.__data__`.

---

## üîÅ –ú–æ–∂–Ω–æ –ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å `.data()` –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑?

–î–∞, **–º–æ–∂–Ω–æ**, –Ω–æ:

* **–Ω–æ–≤—ã–π –≤—ã–∑–æ–≤ `selection.data()` –∑–∞–º–µ–Ω—è–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**.
* D3 –∑–∞–Ω–æ–≤–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `__data__` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞, –∞ –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –∏–ª–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç.

–ü—Ä–∏–º–µ—Ä:

```js
const sel = d3.selectAll("circle")
  .data([10, 20, 30]);

// –ø–æ—Ç–æ–º
sel.data(["a", "b", "c"]);  // –ó–∞–º–µ–Ω–∏—Ç –≤—Å–µ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
```

---

## üö´ –ù–µ–ª—å–∑—è –ø—Ä–∏–≤—è–∑–∞—Ç—å **–Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–∞–±–æ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ** –∫ –æ–¥–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É —á–µ—Ä–µ–∑ `.data()`

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å **–Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–∞–±–æ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö**, —Ç–æ:

### üîπ –°–ø–æ—Å–æ–± 1: –ò—Å–ø–æ–ª—å–∑—É–π –æ–±—ä–µ–∫—Ç

```js
.selection().data([
  {value: 10, meta: "foo"},
  {value: 20, meta: "bar"}
])
```

### üîπ –°–ø–æ—Å–æ–± 2: –ü—Ä—è–º–æ –≤ DOM-–∞—Ç—Ä–∏–±—É—Ç—ã –∏–ª–∏ —Å–≤–æ–π—Å—Ç–≤–∞

```js
d3.select("circle")
  .property("myExtraData", {...})
  .data([42]); // –æ—Å–Ω–æ–≤–Ω–æ–π datum
```

---

## üì¶ –°–≤–æ–¥–∫–∞

| –í–æ–ø—Ä–æ—Å                                       | –û—Ç–≤–µ—Ç                                       |
| -------------------------------------------- | ------------------------------------------- |
| –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ `.data()`?         | –í DOM-—ç–ª–µ–º–µ–Ω—Ç–µ, –≤ `__data__`                |
| –•—Ä–∞–Ω–∏—Ç –ª–∏ –∏—Ö `Selection`?                    | –ù–µ—Ç                                         |
| –ú–æ–∂–Ω–æ –ª–∏ –≤—ã–∑–≤–∞—Ç—å `.data()` –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑?    | –î–∞, –Ω–æ –∫–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ –∑–∞–º–µ–Ω—è–µ—Ç –ø—Ä–æ—à–ª—ã–µ –¥–∞–Ω–Ω—ã–µ |
| –ú–æ–∂–Ω–æ –ª–∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–∞–±–æ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö? | –ù–µ –Ω–∞–ø—Ä—è–º—É—é. –ò—Å–ø–æ–ª—å–∑—É–π –æ–±—ä–µ–∫—Ç—ã –∏–ª–∏ —Å–≤–æ–π—Å—Ç–≤–∞ |

---

