### üîπ –≠—Ç–∞–ø 1: **–í—ã–±–æ—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (Selection) –≤ D3.js**

–ù–∞ —ç—Ç–∞–ø–µ Selection –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç–æ–¥–∞:

---

### ‚úÖ **–ú–µ—Ç–æ–¥—ã –≤—ã–±–æ—Ä–∞:**

| –ú–µ—Ç–æ–¥                    | –û–ø–∏—Å–∞–Ω–∏–µ                                                         |
| ------------------------ | ---------------------------------------------------------------- |
| `d3.select(selector)`    | –í—ã–±–∏—Ä–∞–µ—Ç **–æ–¥–∏–Ω** DOM-—ç–ª–µ–º–µ–Ω—Ç (–ø–µ—Ä–≤—ã–π, –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø–æ–¥ —Å–µ–ª–µ–∫—Ç–æ—Ä). |
| `d3.selectAll(selector)` | –í—ã–±–∏—Ä–∞–µ—Ç **–≤—Å–µ** —ç–ª–µ–º–µ–Ω—Ç—ã, –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –ø–æ–¥ —Å–µ–ª–µ–∫—Ç–æ—Ä.              |

–ü—Ä–∏–º–µ—Ä:

```js
const svg = d3.select("svg");
const circles = d3.selectAll("circle");
```

–≠—Ç–∏ –º–µ—Ç–æ–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç **–æ–±—ä–µ–∫—Ç—ã —Ç–∏–ø–∞ `Selection`**, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–∞–ª—å–Ω–µ–π—à–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `attr()`, `data()`, `enter()`, `append()` –∏ —Ç.–¥.).

---

### üî∏ –ß—Ç–æ —Ç–∞–∫–æ–µ **—Å–µ–ª–µ–∫—Ç–æ—Ä—ã**?

–°–µ–ª–µ–∫—Ç–æ—Ä—ã –≤ D3.js ‚Äî —ç—Ç–æ —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, –∫–∞–∫–∏–µ DOM-—ç–ª–µ–º–µ–Ω—Ç—ã –≤—ã–±—Ä–∞—Ç—å. D3 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä—ã**, –∫–∞–∫ –∏ `document.querySelector` / `querySelectorAll`.

---

### ‚úÖ –ü—Ä–∏–º–µ—Ä—ã CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤:

| –ü—Ä–∏–º–µ—Ä —Å–µ–ª–µ–∫—Ç–æ—Ä–∞        | –ö–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ                                              |
| ----------------------- | -------------------------------------------------------------- |
| `"div"`                 | –í—Å–µ `<div>`                                                    |
| `"#id"`                 | –≠–ª–µ–º–µ–Ω—Ç —Å `id="id"`                                            |
| `".class"`              | –≠–ª–µ–º–µ–Ω—Ç—ã —Å –∫–ª–∞—Å—Å–æ–º `class`                                     |
| `"svg circle"`          | –í—Å–µ `<circle>` –≤–Ω—É—Ç—Ä–∏ `<svg>`                                  |
| `"g > rect"`            | –í—Å–µ `<rect>`, —è–≤–ª—è—é—â–∏–µ—Å—è **–Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–º–∏** –ø–æ—Ç–æ–º–∫–∞–º–∏ `<g>` |
| `"circle:nth-child(2)"` | –í—Ç–æ—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç `<circle>` –≤–Ω—É—Ç—Ä–∏ —Ä–æ–¥–∏—Ç–µ–ª—è                      |
| `"div"`                 | –í—Å–µ —Ç–µ–≥–∏ `<div>`                                               |
| `"#main"`               | –≠–ª–µ–º–µ–Ω—Ç —Å `id="main"`                                          |
| `".node"`               | –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å –∫–ª–∞—Å—Å–æ–º `node`                                  |
| `"svg circle"`          | –í—Å–µ `<circle>` –≤–Ω—É—Ç—Ä–∏ `<svg>`                                  |
| `"g > rect"`            | –í—Å–µ `<rect>`, —è–≤–ª—è—é—â–∏–µ—Å—è **–Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–º–∏** –ø–æ—Ç–æ–º–∫–∞–º–∏ `<g>` |
| `".node text"`          | –í—Å–µ `<text>` –≤–Ω—É—Ç—Ä–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –∫–ª–∞—Å—Å–æ–º `node`                 |
| `"[data-id]"`           | –≠–ª–µ–º–µ–Ω—Ç—ã, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –∞—Ç—Ä–∏–±—É—Ç `data-id`                     |
| `"[data-id='42']"`      | –≠–ª–µ–º–µ–Ω—Ç —Å `data-id="42"`                                       |
| `"circle:first-child"`  | –ü–µ—Ä–≤—ã–π `<circle>` —Å—Ä–µ–¥–∏ –±—Ä–∞—Ç—å–µ–≤                                |
| `"circle:nth-child(2)"` | –í—Ç–æ—Ä–æ–π `<circle>` —Å—Ä–µ–¥–∏ –±—Ä–∞—Ç—å–µ–≤                                |
| `"g:not(.hidden)"`      | –í—Å–µ `<g>`, –Ω–µ –∏–º–µ—é—â–∏–µ –∫–ª–∞—Å—Å `hidden`                           |
| `"path.highlighted"`    | –í—Å–µ `<path>` —Å –∫–ª–∞—Å—Å–æ–º `highlighted`                           |
| `"rect[fill='red']"`    | –í—Å–µ `<rect>` —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `fill="red"`                          |
| `"circle:hover"`        | –≠–ª–µ–º–µ–Ω—Ç `<circle>`, –Ω–∞–¥ –∫–æ—Ç–æ—Ä—ã–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫—É—Ä—Å–æ—Ä –º—ã—à–∏          |
| `"g[class^='group-']"`  | –ö–ª–∞—Å—Å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `group-`                                    |
| `"g[class$='-end']"`    | –ö–ª–∞—Å—Å –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ `-end`                                  |
| `"g[class*='middle']"`  | –ö–ª–∞—Å—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Å—Ç—Ä–æ–∫—É `middle`                              |

---

### üß† –ó–∞–º–µ—á–∞–Ω–∏—è:

* `>` –æ–∑–Ω–∞—á–∞–µ—Ç **–Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–æ—Ç–æ–º—Å—Ç–≤–æ**, –∞ –ø—Ä–æ–±–µ–ª ‚Äî **–ª—é–±–æ–π —É—Ä–æ–≤–µ–Ω—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏**.
* `:not(...)` ‚Äî –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ.
* `[...]` ‚Äî –≤—ã–±–æ—Ä–∫–∞ –ø–æ –∞—Ç—Ä–∏–±—É—Ç–∞–º.
* `:nth-child(n)` ‚Äî –∏–Ω–¥–µ–∫—Å –≤ –ø–æ—Ä—è–¥–∫–µ —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Å—Ä–µ–¥–∏ –±—Ä–∞—Ç—å–µ–≤.
* –ö–æ–º–±–∏–Ω–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `.node text`) ‚Äî –≤—ã–±–æ—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏.

---


–°–µ–ª–µ–∫—Ç–æ—Ä—ã –æ–ø–∏—Å–∞–Ω—ã –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ **CSS Selectors Level 3 / 4**:

* [W3C Selectors Level 3](https://www.w3.org/TR/selectors-3/)
* [MDN: CSS Selectors Reference](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors)

---

### üìò –í–∞–∂–Ω–æ:

* –°–µ–ª–µ–∫—Ç–æ—Ä—ã –≤ `d3.select()` –∏ `d3.selectAll()` —Ä–∞–±–æ—Ç–∞—é—Ç **—Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ**, –∫–∞–∫ –≤ `document.querySelector` / `querySelectorAll`.
* D3 –Ω–µ –∏–∑–æ–±—Ä–µ—Ç–∞–µ—Ç —Å–≤–æ–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã ‚Äî –æ–Ω –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ DOM API –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º.


---

## üîë –ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç

–º–µ—Ç–æ–¥ `d3.select(...)` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç **–ª–∏–±–æ CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä (—Å—Ç—Ä–æ–∫—É)**, **–ª–∏–±–æ –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –Ω–∞ DOM-—ç–ª–µ–º–µ–Ω—Ç**.
–≠—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ **–∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ** –∏ —à–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö —Å–æ–±—ã—Ç–∏–π –∏ –≤ `each(...)`.

---

## üìò –°–∏–≥–Ω–∞—Ç—É—Ä–∞ –º–µ—Ç–æ–¥–∞

```js
d3.select(selectorOrElement)
```

* `selectorOrElement` ‚Äî **—Å—Ç—Ä–æ–∫–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `"#id"` –∏–ª–∏ `"circle"`)
  –∏–ª–∏ **DOM-—ç–ª–µ–º–µ–Ω—Ç** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `this`, `event.target`).

---

## üí° –ü—Ä–∏–º–µ—Ä: –≤–Ω—É—Ç—Ä–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞

```js
.on("click", function(event, d) {
  const isSelected = d3.select(this).classed("selected");
  console.log("Selected:", isSelected);
});
```

* –ó–¥–µ—Å—å `this` ‚Äî DOM-—ç–ª–µ–º–µ–Ω—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –∫–ª–∏–∫–Ω—É–ª–∏.
* `d3.select(this)` ‚Äî –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –µ–≥–æ –≤ D3 `Selection`.
* `.classed("selected")` –±–µ–∑ –≤—Ç–æ—Ä–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ ‚Äî **–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true`/`false`**, –µ—Å—Ç—å –ª–∏ —É —ç–ª–µ–º–µ–Ω—Ç–∞ CSS-–∫–ª–∞—Å—Å `"selected"`.

---

## üîÅ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —á–µ—Ä–µ–∑ —Å–µ–ª–µ–∫—Ç–æ—Ä

–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä:

```js
d3.select("#circle42").classed("selected");
```

–ù–æ –≤ –æ–±—â–µ–º —Å–ª—É—á–∞–µ **–≤–Ω—É—Ç—Ä–∏ D3-—Ü–µ–ø–æ—á–µ–∫ —Ç—ã —á–∞—Å—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—à—å —Å `this`**, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç—ã –Ω–∞—Ö–æ–¥–∏—à—å—Å—è –≤–Ω—É—Ç—Ä–∏ `each`, `on`, `filter` –∏ –¥—Ä—É–≥–∏—Ö –∫–æ–ª–±—ç–∫–æ–≤, –≥–¥–µ —É–∂–µ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω—É–∂–Ω—ã–π DOM-—ç–ª–µ–º–µ–Ω—Ç.

---

## ‚úÖ –†–∞–±–æ—á–∏–π –ø—Ä–∏–º–µ—Ä

```html
<svg>
  <circle id="c1" r="20" cx="50" cy="50" class="selected"></circle>
</svg>

<script>
  d3.selectAll("circle")
    .each(function() {
      const isSelected = d3.select(this).classed("selected");
      console.log(this.id, "selected?", isSelected);
    });
</script>
```

---

## üß† –í—ã–≤–æ–¥

| –í–æ–ø—Ä–æ—Å                                                | –û—Ç–≤–µ—Ç                                                                   |
| ----------------------------------------------------- | ----------------------------------------------------------------------- |
| –ú–æ–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `this` –≤ `select`?                | ‚úÖ –î–∞, —ç—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ: `d3.select(this)`                                  |
| –ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `.classed("X")` –±–µ–∑ –≤—Ç–æ—Ä–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞? | `true` / `false`, –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–ª–∞—Å—Å–∞                               |
| –ü–æ—á–µ–º—É —Ç–∞–∫ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `this`?                   | –ü–æ—Ç–æ–º—É —á—Ç–æ –≤ `each`, `on`, `filter` —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å —Å —É–∂–µ –Ω—É–∂–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º |


