### **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç D3.js Drag?**  
D3.js **Drag Behavior** (`d3.drag()`) ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è (drag-and-drop) –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º SVG –∏–ª–∏ HTML.  
–û–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –º—ã—à–∏ –∏ –∫–∞—Å–∞–Ω–∏–π, –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è.

---

## **1. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã D3 Drag**
### **1.1 –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è**
```javascript
const drag = d3.drag();
```
- `d3.drag()` —Å–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç-–ø–æ–≤–µ–¥–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ `.call()`.

### **1.2 –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π**
Drag –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç—Ä–∏ —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏–π:
1. **`start`** ‚Äî –Ω–∞—á–∞–ª–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è (–∑–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ –º—ã—à–∏/–∫–∞—Å–∞–Ω–∏–µ).  
2. **`drag`** ‚Äî –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ (–¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏/–ø–∞–ª—å—Ü–∞).  
3. **`end`** ‚Äî –æ–∫–æ–Ω—á–∞–Ω–∏–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è (–æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏).  

```javascript
const drag = d3.drag()
  .on("start", function(event, d) { /* –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ –Ω–∞—á–∞–ª–µ */ })
  .on("drag", function(event, d) { /* –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ */ })
  .on("end", function(event, d) { /* –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ */ });
```

### **1.3 –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º**
```javascript
d3.selectAll("circle").call(drag); // –ü—Ä–∏–º–µ–Ω—è–µ–º drag –∫ –∫—Ä—É–≥–∞–º
```

---

## **2. –ö–∞–∫ Drag –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è?**
### **2.1 –≠—Ç–∞–ø—ã —Ä–∞–±–æ—Ç—ã**
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É –º—ã—à–∏ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–µ** ‚Üí —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `"start"`.  
   - –í `event` –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞—á–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (`event.x`, `event.y`).  
   - `this` –∏–ª–∏ `event.target` ‚Äî DOM-—ç–ª–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ—Ç—Å—è.  

2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–≤–∏–≥–∞–µ—Ç –º—ã—à—å** ‚Üí —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `"drag"`.  
   - `event.dx` –∏ `event.dy` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ–±—ã—Ç–∏—è.  
   - –ó–¥–µ—Å—å –æ–±—ã—á–Ω–æ –æ–±–Ω–æ–≤–ª—è—é—Ç –ø–æ–∑–∏—Ü–∏—é —ç–ª–µ–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ `d3.select(this).attr("cx", event.x)`).  

3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—É—Å–∫–∞–µ—Ç –∫–Ω–æ–ø–∫—É** ‚Üí —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `"end"`.  
   - –ú–æ–∂–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä.  

### **2.2 –í–∞–∂–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ `event`**
| –°–≤–æ–π—Å—Ç–≤–æ       | –û–ø–∏—Å–∞–Ω–∏–µ                                                                 |
|----------------|--------------------------------------------------------------------------|
| `event.target` | DOM-—ç–ª–µ–º–µ–Ω—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—á–∞–ª–æ—Å—å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ.                        |
| `event.x`      | –¢–µ–∫—É—â–∞—è X-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –∫—É—Ä—Å–æ—Ä–∞ (–≤ —Å–∏—Å—Ç–µ–º–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ SVG).   |
| `event.y`      | –¢–µ–∫—É—â–∞—è Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –∫—É—Ä—Å–æ—Ä–∞.                                           |
| `event.dx`     | –ò–∑–º–µ–Ω–µ–Ω–∏–µ X —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ–±—ã—Ç–∏—è `drag`.                               |
| `event.dy`     | –ò–∑–º–µ–Ω–µ–Ω–∏–µ Y —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ–±—ã—Ç–∏—è `drag`.                               |
| `event.subject`| –î–∞–Ω–Ω—ã–µ, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —ç–ª–µ–º–µ–Ω—Ç–æ–º (–µ—Å–ª–∏ –∑–∞–¥–∞–Ω—ã —á–µ—Ä–µ–∑ `.subject()`).         |

---

## **3. –ü—Ä–∏–º–µ—Ä: –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –∫—Ä—É–≥–æ–≤ –≤ SVG**
```html
<svg width="500" height="200">
  <circle cx="100" cy="100" r="20" fill="red"></circle>
</svg>
<script>
  const drag = d3.drag()
    .on("start", function(event, d) {
      console.log("–ù–∞—á–∞–ª–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ!", event.x, event.y);
    })
    .on("drag", function(event) {
      // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –∫—Ä—É–≥–∞
      d3.select(this)
        .attr("cx", event.x)
        .attr("cy", event.y);
    })
    .on("end", function() {
      console.log("–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ");
    });

  d3.select("circle").call(drag);
</script>
```

---

## **4. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**
### **4.1 –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π**
–ú–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ª—å–∫–æ –ª–µ–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏):
```javascript
d3.drag()
  .filter(event => event.button === 0) // –¢–æ–ª—å–∫–æ –ª–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏
  .on("drag", /* ... */);
```

### **4.2 –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è**
–£–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç —á–∞—Å—Ç–∏—á–Ω–æ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã):
```javascript
d3.drag()
  .container(document.getElementById("my-svg")) // –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —ç—Ç–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
  .on("drag", /* ... */);
```

### **4.3 –ö–∞—Å—Ç–æ–º–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (`subject`)**
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Å–æ–±—ã—Ç–∏—è:
```javascript
d3.drag()
  .subject(function(d) { return { x: d.x, y: d.y }; }) // –î–∞–Ω–Ω—ã–µ –¥–ª—è event.subject
  .on("start", function(event) {
    console.log(event.subject); // { x: ..., y: ... }
  });
```

---

## **5. –ò—Ç–æ–≥**
- **D3 Drag** ‚Äî —ç—Ç–æ –≥–∏–±–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è drag-and-drop –≤ SVG/HTML.  
- **–û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è**: `start`, `drag`, `end`.  
- **–ö–ª—é—á–µ–≤—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ —Å–æ–±—ã—Ç–∏—è**: `event.x`, `event.y`, `event.dx`, `event.dy`.  
- **–ü—Ä–∏–≤—è–∑–∫–∞ –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º**: `.call(drag)`.  

**–ü—Ä–∏–º–µ—Ä –≤ Codepen:**  
üëâ [D3.js Drag Example](https://codepen.io/pen?template=ExZqYQJ)  

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ–º! üöÄ