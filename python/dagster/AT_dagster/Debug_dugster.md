# –û—Ç–ª–∞–¥–∫–∞ –≤ Dugster
## 1. –ó–∞–ø—É—Å–∫ ```job``` –∏–ª–∏ ```asset``` –∏–∑ –æ–±—ã—á–Ω–æ–≥–æ Python-—Å–∫—Ä–∏–ø—Ç–∞
C–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ –ø—Ä—è–º–æ–π —Å–ø–æ—Å–æ–± –æ—Ç–ª–∞–¥–∫–∏, –≤—ã–∑–æ–≤ –Ω—É–∂–Ω—ã—Ö ```asset```-—Ñ—É–Ω–∫—Ü–∏–π –≤—Ä—É—á–Ω—É—é –≤ —Å–∫—Ä–∏–ø—Ç–µ.


```python
from my_dagster_project.assets import company_id, company_details, store_to_db

if __name__ == "__main__":
    id = company_id()
    details = company_details(id) 
    store_to_db(details)
#  üìå –º–æ–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å –ª—é–±—ã–µ breakpoints –≤ PyCharm –∏ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –ø–æ—à–∞–≥–æ–≤–æ. 
```

üü¢ –ü–ª—é—Å—ã:  
- –±—ã—Å—Ç—Ä–æ  
- —É–¥–æ–±–Ω–æ  
- PyCharm —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω–æ  

üî¥ –ú–∏–Ω—É—Å—ã:
- –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã Dagster (–±–µ–∑ –≥—Ä–∞—Ñ–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)
- –Ω–µ—Ç UI 
- –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è

## 2. –û—Ç–ª–∞–¥–∫–∞ ```job``` —á–µ—Ä–µ–∑ –æ—Ç–ª–∞–¥—á–∏–∫ PyCharm, –∏—Å–ø–æ–ª—å–∑—É—è ```execute_in_process```

Dagster –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å ``job`` –ø—Ä—è–º–æ –∏–∑ **Python** —Å –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ.

```python
from my_dagster_project.jobs import my_sync_job

if __name__ == "__main__":
    result = my_sync_job.execute_in_process()
    assert result.success
# üìå –≠—Ç–æ —Å–∞–º—ã–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± –æ—Ç–ª–∞–¥–∫–∏ ‚Äú–ø–æ-Dagster‚Äô–æ–≤—Å–∫–∏‚Äù
#    –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ—á–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∞ –∏ –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π 
```
üü¢ –ü–ª—é—Å—ã:  
—Ä–∞–±–æ—Ç–∞–µ—Ç ```@asset```, ```deps```, ```job```  
–º–æ–∂–Ω–æ –¥–µ–±–∞–∂–∏—Ç—å –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –∫–æ–¥  
—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ PyCharm, Jupyter, VSCode –∏ —Ç.–¥.  

üî¥ –ú–∏–Ω—É—Å—ã:
–Ω–µ–ª—å–∑—è –¥–µ–±–∞–∂–∏—Ç—å –∏–∑ UI Dagster (Dagit)


## 3. –û—Ç–ª–∞–¥–∫–∞ —á–µ—Ä–µ–∑ **Dagit** (**Dagster UI**) + –≤–Ω–µ—à–Ω–µ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–µ–±–∞–≥–≥–µ—Ä–∞
Dagster UI (Dagit) –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–¥ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ, –∏ –æ–±—ã—á–Ω—ã–µ breakpoint'—ã –∏–∑ PyCharm —Ç—É–¥–∞ –Ω–µ "–≤–∏–¥–Ω—ã".  
–ù–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π –¥–µ–±–∞–≥–≥–µ—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä debugpy (–æ—Ç–ª–∞–¥—á–∏–∫ –¥–ª—è VSCode/PyCharm)


```python
import debugpy

@asset
def company_id():
    print("Waiting for debugger attach...")
        #TODO –î–æ–±–∞–≤–∏—Ç—å –≤ –Ω—É–∂–Ω—ã–π asset:
    debugpy.listen(("0.0.0.0", 5678))
    debugpy.wait_for_client()  # –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç—É—Ç, –ø–æ–∫–∞ —Ç—ã –Ω–µ –ø–æ–¥–∫–ª—é—á–∏—à—å—Å—è

    # —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å breakpoint'—ã 
    print("Debugger attached") 
    return 123
```

–î–∞–ª–µ–µ:

- –ó–∞–ø—É—Å—Ç–∏—Ç—å ```dagster dev```
- –í Dagit –Ω–∞–∂–∞—Ç—å "Materialize" –¥–ª—è company_id  
- –í PyCharm –≤—ã–±—Ä–∞—Ç—å ‚ÄúAttach to Process‚Äù (–∏–ª–∏ Remote Debug)
  - host: localhost
  - port: 5678

–ö–æ–¥ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞ debugpy.wait_for_client() ‚Äî –∏ —Ç—ã —Å–º–æ–∂–µ—à—å –ø–æ—à–∞–≥–æ–≤–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å

üü¢ –ü–ª—é—Å—ã:
- –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ –¥–∞–∂–µ –∏–∑ Dagit UI
- –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —É—Å–ª–æ–≤–∏—è—Ö, –±–ª–∏–∑–∫–∏—Ö –∫ –±–æ–µ–≤—ã–º

üî¥ –ú–∏–Ω—É—Å—ã:
- —Ç—Ä—É–¥–æ–µ–º–æ–∫–æ—Å—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –æ—Ç–ª–∞–¥–∫–∏ (–Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–ª–∞–∫—É –Ω–∞–∂–∞—Ç–∏–µ–º –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–∏)
- –Ω—É–∂–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ–±—ã –æ—Ç–ª–∞–¥–∫–∞ –Ω–µ —É—à–ª–∞ –≤ –ø—Ä–æ–º üôÇ